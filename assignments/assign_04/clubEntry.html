<!DOCTYPE html>

<html lang="en">

<head>

	<title>ClubMeNow - Club Entry</title>
	<link rel="icon" href="clubMeNow300x300.png" type="image/png" />
	<!-- Bootstrap CSS -->
	<link rel='stylesheet' 
	href='https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css' />
	<!-- ClubMeNow custom CSS -->
	<link rel='stylesheet' href='clubMeNow.css' />
	
</head>

<body>

<div class='container'>

	<h1>Add Club</h1>
	<form action='clubDistanceList.html'>
		<div class='form-group'>
			<label for='clubName'></label>
			<input name='clubName' id='clubName' type='text' 
			    class='form-control cmn_moreHeight' 
				placeholder='Driver' required /><br>
			<button class='btn btn-success cmn_fullHeight' 
			    onclick='addClub();'>&nbsp;&nbsp;&#x2714;&nbsp;&nbsp;</button> 
			<button class='btn btn-danger cmn_fullHeight'  
			    onclick='cancelClub();'>&nbsp;&nbsp;X&nbsp;&nbsp;</button>
			<br>
			<br>
		</div>
	</form>
	
	<br>
	<footer>Copyright &copy;2020 George Corser</footer>
	
</div>

<!-- ClubMeNow custom JS -->
<script src='clubMeNow.js'></script>
<script>
	// retrieve the row of the user-chosen club
	let clubRow = parseInt(localStorage.getItem('club'));
	// retrieve the "clubs" array
	let clubs = JSON.parse(localStorage.getItem('clubs'));
	// display the full clubName of the user-chosen club
	let newClubName ;
	let newClubDistances;
	
	function addClub() {
        // your code here
		let name = document.getElementById("clubName").innerHTML;
		let newClub = [clubs[clubs.length - 1][0]] + 1, name.slice(0,3), name,   0, 0, 0, 0, 0,   0,   0];
		clubs.push(newClub)
		window.location.href = "clubDistanceList.html"; 
		
		let tblbody = document.getElementById('clubTable').children[0]; 
		
		let row = tblbody.insertRow(clubs.length); // skip first row (column headings)
		// create an empty cell for each column to appear in HTML table
		let cell0 = row.insertCell(0); // clubAbbrev
		let cell1 = row.insertCell(1); // avgDist
		let cell2 = row.insertCell(2); // minDist
		let cell3 = row.insertCell(3); // maxDist
		let cell4 = row.insertCell(4); // numOfShots
		let cell5 = row.insertCell(5); // ("+" button)
		let cell6 = row.insertCell(6); // clubName
		// right align only the cells that need to be right aligned
		cell0.className = "cmn_hidden"; // clubAbbrev
		cell1.className = "cmn_alignRight cmn_fullHeight"; // avgDist
		cell2.className = "cmn_alignRight cmn_hidden"; // minDist
		cell3.className = "cmn_alignRight cmn_fullHeight"; // maxDist
		cell4.className = "cmn_alignRight cmn_hidden"; // numOfShots
		cell5.className = ""; // ("+" button)
		cell6.className = "cmn_fullHeight";
		// populate HTML table with data from "clubs" array
		cell0.innerHTML = newClub[1]; // clubAbbrev
		cell1.innerHTML = Math.round(newClub[3]); // avgDist
		cell2.innerHTML = Math.round(newClub[4]); // minDist
		cell3.innerHTML = Math.round(newClub[5]); // maxDist
		cell4.innerHTML = Math.round(newClub[6]); // numOfShots
		cell5.innerHTML = "<button class='btn btn-success cmn_noPadding cmn_fullHeight' onclick='displayClubDistanceEntryForm(" + clubs.length + ");'>&nbsp;&nbsp;+&nbsp;&nbsp;</button>";
		cell6.innerHTML = newClub[2]; // clubName
		
		// store the array in local storage
	let str = JSON.stringify(clubs);
	localStorage.setItem("clubs", str);
	// and refresh screen
	window.location.href = "clubDistanceList.html"; 
	}
	
	// navigate to club distance LIST screen
    function cancelClub() {
	    window.location.href = "clubDistanceList.html"; 
    }
</script>

</body>

</html>
